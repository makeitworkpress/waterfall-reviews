!function s(i,o,c){function u(t,e){if(!o[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var n=o[t]={exports:{}};i[t][0].call(n.exports,function(e){return u(i[t][1][e]||e)},n,n.exports,s,i,o,c)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,r){"use strict";e("./utils");var a={components:{charts:e("./components/charts"),comments:e("./components/comments"),filter:e("./components/filter"),tables:e("./components/tables")},initialize:function(){for(var e in this.components)this.components[e].initialize()}};window.App=a,jQuery(document).ready(function(){a.initialize()})},{"./components/charts":2,"./components/comments":3,"./components/filter":4,"./components/tables":5,"./utils":6}],2:[function(e,t,r){var c=e("./../vendor/randomcolor"),s=e("./../utils"),a={charts:{},data:{},initialize:function(){var a=this;jQuery(".wfr-charts").each(function(){var e=jQuery(this).find(".wfr-charts-chart").get(0),t=jQuery(this).attr("id");a.data[t]={normal:[],weighted:[]},a.charts[t]=!1,t&&void 0!==window["chart"+t]&&(a.data[t]=window["chart"+t],a.renderChart(a.data[t].normal,e,t),0<a.data[t].weighted.dataSet.data.length&&jQuery(this).find(".wfr-charts-weight").show())}),jQuery(".wfr-chart-selector select").change(function(){a.listener(this)}),jQuery(".wfr-charts-weight").submit(function(e){e.preventDefault()}),jQuery(".wfr-charts-normal").click(function(e){e.preventDefault();var t=jQuery(this).closest(".wfr-charts").find(".wfr-charts-chart").get(0),r=jQuery(this).closest(".wfr-charts").attr("id");jQuery(this).addClass("active"),jQuery(this).next(".wfr-charts-weighted").removeClass("active"),a.renderChart(a.data[r].normal,t,r)}),jQuery(".wfr-charts-weighted").click(function(e){e.preventDefault();var t=jQuery(this).closest(".wfr-charts").find(".wfr-charts-chart").get(0),r=jQuery(this).closest(".wfr-charts").attr("id");jQuery(this).addClass("active"),jQuery(this).prev(".wfr-charts-normal").removeClass("active"),a.renderChart(a.data[r].weighted,t,r)})},listener:function(t){if(jQuery(t).val()){var r=jQuery(t).closest(".wfr-charts").find(".wfr-charts-chart").get(0),a=jQuery(t).closest(".wfr-charts").attr("id"),n=this,e=jQuery(t).closest(".wfr-charts").find(".wfr-charts-weight");0<e.length&&(jQuery(e).find(".wfr-charts-normal").addClass("active"),jQuery(e).find(".wfr-charts-weighted").removeClass("active")),jQuery(t).closest(".wfr-charts").find(".wfr-charts-weight").hide(),s.ajax({beforeSend:function(){jQuery(r).closest(".wfr-charts-wrapper").addClass("components-loading")},complete:function(){jQuery(r).closest(".wfr-charts-wrapper").removeClass("components-loading")},data:{action:"getChartData",categories:jQuery(t).closest(".wfr-chart-selector").data("categories"),key:jQuery(t).val(),include:jQuery(t).closest(".wfr-chart-selector").data("include"),nonce:wfr.nonce,tags:jQuery(t).closest(".wfr-chart-selector").data("tags")},success:function(e){wfr.debug&&console.log(e),e.success&&(n.data[a]=e.data,jQuery(t).closest(".wfr-charts").addClass("wfr-charts-loaded"),0<n.data[a].weighted.dataSet.data.length&&jQuery(t).closest(".wfr-charts").find(".wfr-charts-weight").show(),n.renderChart(e.data.normal,r,a))}})}},renderChart:function(e,t,r){var a={backgroundColor:[],barThickness:30,data:[],label:e.dataSet.label},n=[];if(void 0!==e.dataSet){for(var s in e.dataSet.data){var i=c(),o=parseFloat(e.dataSet.data[s]);a.backgroundColor.push(i),a.data.push(o)}if(n.push(a),this.charts[r])return this.charts[r].data={datasets:n,labels:e.labels},this.charts[r].options.title.text=a.label,this.charts[r].update(),void this.setChartHeight(n,a.barThickness,t);this.charts[r]=new Chart(t,{data:{datasets:n,labels:e.labels},options:{legend:{display:!1},title:{display:!0,text:a.label},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{ticks:{beginAtZero:!0}}]}},type:"horizontalBar"}),this.setChartHeight(n,a.barThickness,t)}},setChartHeight:function(e,t,r){var a=r.height;void 0!==e[0]&&void 0!==e[0].data&&(a=e[0].data.length*(t+10)+64),a<500&&(a=500),jQuery(r).closest(".wfr-charts-wrapper").height(a)}};t.exports=a},{"./../utils":6,"./../vendor/randomcolor":7}],3:[function(e,t,r){var a=e("./../utils"),n={initialize:function(){jQuery(".comment-form-rating input").change(function(){a.rangeValue(this)}),jQuery("#wfr-reply").change(function(){this.checked?jQuery(this).closest(".comment-form-reply").prevAll(".comment-form-rating").slideUp():jQuery(this).closest(".comment-form-reply").prevAll(".comment-form-rating").slideDown()})}};t.exports=n},{"./../utils":6}],4:[function(e,t,r){var a=e("./../utils"),n={arguments:{},currentFilter:null,page:0,initialize:function(){var e=this;jQuery(".wfr-filter").each(function(){e.listener(this)}),this.ratingSlider()},filter:function(e){this.arguments=new FormData(jQuery(e).get(0)),this.arguments.append("nonce",wfr.nonce),this.arguments.append("action","filterReviews");var r=jQuery(e).data("target");this.page&&(this.arguments.append("page",this.page),this.page=0),a.ajax({beforeSend:function(){jQuery('div[data-id="'+r+'"]').addClass("components-loading")},complete:function(){jQuery('div[data-id="'+r+'"]').removeClass("components-loading")},contentType:!1,data:this.arguments,processData:!1,success:function(e){if(wfr.debug&&console.log(e),e.success&&(void 0!==e.data.html&&(jQuery('div[data-id="'+r+'"]').replaceWith(e.data.html),"undefined"!=typeof lazyload?lazyload.update():"undefined"!=typeof wpOptimizeLazyLoad?wpOptimizeLazyLoad.update():"undefined"!=typeof wpComponentsLazyLoad&&wpComponentsLazyLoad.update()),void 0!==e.data.posts)){var t=jQuery('div[data-id="'+r+'"]').closest(".atom-tabs-content").find(".wfr-chart-selector select").get(0);App.components.charts.posts=e.data.posts,App.components.charts.listener(t)}}})},listener:function(t){var r=this;jQuery(t).hasClass("wfr-instant-filter")&&jQuery(t).find(":input").change(function(e){r.filter(t)}),jQuery(t).submit(function(e){r.filter(t),e.preventDefault()})},ratingSlider:function(){a.rangeValue(".wfr-filter-rating input"),jQuery(".wfr-filter-rating input").change(function(){a.rangeValue(this)})}};t.exports=n},{"./../utils":6}],5:[function(e,t,r){var a=e("./../utils"),n={reviews:[],initialize:function(){var r=this;jQuery(document).on("click",".wfr-tables-form li",function(){var e=this.dataset.target;if(jQuery(this).toggleClass("active"),r.reviews.includes(e))for(var t=r.reviews.length-1;0<=t;t--)r.reviews[t]===e&&r.reviews.splice(t,1);else r.reviews.push(e);r.loadTables(this)}),jQuery(".wfr-tables-form").submit(function(e){e.preventDefault()})},loadTables:function(e){if(!(this.reviews.length<2)){var t=jQuery(e).closest(".wfr-tables-form"),r=jQuery(t).next(".wfr-tables-view");console.log(r),a.ajax({beforeSend:function(){jQuery(r).addClass("components-loading")},complete:function(){jQuery(r).removeClass("components-loading")},data:{action:"loadTables",attributes:jQuery(t).data("attributes"),categories:jQuery(t).data("categories"),groups:jQuery(t).data("groups"),reviews:this.reviews,nonce:wfr.nonce,properties:jQuery(t).data("properties"),tags:jQuery(t).data("tags"),view:jQuery(t).data("view"),weight:jQuery(t).data("weight")},success:function(e){wfr.debug&&console.log(e),e.success&&jQuery(r).replaceWith(jQuery(e.data).find(".wfr-tables-view"))}})}}};t.exports=n},{"./../utils":6}],6:[function(e,t,r){t.exports.ajax=function(e){return(e=e).data.nonce=wfr.nonce,e.type="POST",e.url=wfr.ajaxUrl,jQuery.ajax(e)},t.exports.rangeValue=function(e){var t=jQuery(e).data("style"),r=jQuery(e).val();""!==t&&("percentages"===t&&(r=parseInt(r/jQuery(e).attr("max")*100)+"%"),jQuery(e).next(".wfr-range-value").html(r))}},{}],7:[function(e,a,n){!function(e,t){if("object"==typeof n){var r=t();"object"==typeof a&&a&&a.exports&&(n=a.exports=r),n.randomColor=r}else"function"==typeof define&&define.amd?define([],t):e.randomColor=t()}(this,function(){var s=null,o={};e("monochrome",null,[[0,0],[100,0]]),e("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),e("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),e("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),e("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),e("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),e("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),e("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]);var i=function(e){if(void 0!==(e=e||{}).seed&&null!==e.seed&&e.seed===parseInt(e.seed,10))s=e.seed;else if("string"==typeof e.seed)s=function(e){for(var t=0,r=0;r!==e.length&&!(t>=Number.MAX_SAFE_INTEGER);r++)t+=e.charCodeAt(r);return t}(e.seed);else{if(void 0!==e.seed&&null!==e.seed)throw new TypeError("The seed value must be an integer or string");s=null}var t,r;if(null===e.count||void 0===e.count)return function(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return f(e);case"hsl":var r=f(e);return"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)";case"hsla":var a=f(e),n=t.alpha||Math.random();return"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+n+")";case"rgbArray":return l(e);case"rgb":return"rgb("+l(e).join(", ")+")";case"rgba":var s=l(e);n=t.alpha||Math.random();return"rgba("+s.join(", ")+", "+n+")";default:return function(e){var t=l(e);function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+r(t[0])+r(t[1])+r(t[2])}(e)}}([t=function(e){var t=c(function(e){if("number"==typeof parseInt(e)){var t=parseInt(e);if(t<360&&0<t)return[t,t]}if("string"==typeof e)if(o[e]){var r=o[e];if(r.hueRange)return r.hueRange}else if(e.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var a=function(e){e=3===(e=e.replace(/^#/,"")).length?e.replace(/(.)/g,"$1$1"):e;var t=parseInt(e.substr(0,2),16)/255,r=parseInt(e.substr(2,2),16)/255,a=parseInt(e.substr(4,2),16)/255,n=Math.max(t,r,a),s=n-Math.min(t,r,a),i=n?s/n:0;switch(n){case t:return[(r-a)/s%6*60||0,i,n];case r:return[60*((a-t)/s+2)||0,i,n];case a:return[60*((t-r)/s+4)||0,i,n]}}(e)[0];return[a,a]}return[0,360]}(e.hue));t<0&&(t=360+t);return t}(e),r=function(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return c([0,100]);var r=function(e){return u(e).saturationRange}(e),a=r[0],n=r[1];switch(t.luminosity){case"bright":a=55;break;case"dark":a=n-10;break;case"light":n=55}return c([a,n])}(t,e),function(e,t,r){var a=function(e,t){for(var r=u(e).lowerBounds,a=0;a<r.length-1;a++){var n=r[a][0],s=r[a][1],i=r[a+1][0],o=r[a+1][1];if(n<=t&&t<=i){var c=(o-s)/(i-n);return c*t+(s-c*n)}}return 0}(e,t),n=100;switch(r.luminosity){case"dark":n=a+20;break;case"light":a=(n+a)/2;break;case"random":a=0,n=100}return c([a,n])}(t,r,e)],e);var a=e.count,n=[];for(e.count=null;a>n.length;)s&&e.seed&&(e.seed+=1),n.push(i(e));return e.count=a,n};function u(e){for(var t in 334<=e&&e<=360&&(e-=360),o){var r=o[t];if(r.hueRange&&e>=r.hueRange[0]&&e<=r.hueRange[1])return o[t]}return"Color not found"}function c(e){if(null===s)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var t=e[1]||1,r=e[0]||0,a=(s=(9301*s+49297)%233280)/233280;return Math.floor(r+a*(t-r))}function e(e,t,r){var a=r[0][0],n=r[r.length-1][0],s=r[r.length-1][1],i=r[0][1];o[e]={hueRange:t,lowerBounds:r,saturationRange:[a,n],brightnessRange:[s,i]}}function l(e){var t=e[0];0===t&&(t=1),360===t&&(t=359),t/=360;var r=e[1]/100,a=e[2]/100,n=Math.floor(6*t),s=6*t-n,i=a*(1-r),o=a*(1-s*r),c=a*(1-(1-s)*r),u=256,l=256,f=256;switch(n){case 0:u=a,l=c,f=i;break;case 1:u=o,l=a,f=i;break;case 2:u=i,l=a,f=c;break;case 3:u=i,l=o,f=a;break;case 4:u=c,l=i,f=a;break;case 5:u=a,l=i,f=o}return[Math.floor(255*u),Math.floor(255*l),Math.floor(255*f)]}function f(e){var t=e[0],r=e[1]/100,a=e[2]/100,n=(2-r)*a;return[t,Math.round(r*a/(n<1?n:2-n)*1e4)/100,n/2*100]}return i})},{}]},{},[1]);